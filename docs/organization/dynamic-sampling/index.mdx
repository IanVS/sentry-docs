---
title: Dynamic Sampling
sidebar_order: 30
description: "Learn how to prioritize meaningful events and increase visibility in lower-volume projects with Dynamic Sampling."
---

## Overview

High-volume projects that generate many events can quickly consume a large portion of your billing quota, leaving less room for other projects and decreasing visibility across them.

{/* Dynamic Sampling is a set of smart sampling techniques that retain a sample of the data you send to Sentry. These algorithms are biased to be more likely to keep samples valuable for debugging and analysis while being less likely to keep common or redundant data. 

Dynamic Sampling is applied on Sentry servers, allowing you to set and adjust sampling rates for the spans you store in Sentry directly in the UI, without needing to modify your SDK. This flexibility enables instant changes, eliminating the need to wait for code freezes, app store approvals, or redeployments. 

Dynamic Sampling looks at the incoming traffic patterns and adjusts sampling decisions tailored to the both the actual traffic volume and the content of the accepted spans. You can read more about the sampling priorities in the [Dynamic Sampling Priorities](#dynamic-sampling-priorities) section. */}

Dynamic Sampling employs advanced sampling techniques to retain a representative sample of the data you send. Its algorithms are designed to prioritize keeping samples that are valuable for debugging and analysis while reducing the retention of common or redundant data.

This process is applied directly on Sentry's servers, allowing you to configure and adjust sampling rates for stored spans right from the UI. There’s no need to modify your SDK, enabling instant updates without waiting for code freezes, app store approvals, or redeployments.

By analyzing incoming traffic patterns, Dynamic Sampling tailors its decisions based on actual traffic volume and the content of the accepted spans. For more details, check out the [Dynamic Sampling Priorities](#dynamic-sampling-priorities) section.

## Prerequisites

- [Admin-level permissions](/organization/membership/).
- Latest version of one of the below SDKs:
  - Python: 1.7.2 or later
  - JavaScript: 7.6.0 or later
  - Apple: 7.23.0 or later
  - Android: 6.5.0 or later
  - React Native: 4.3.0 or later
  - Dart and Flutter: 6.11.0 or later
  - PHP: 3.9.0 or later
  - Laravel: 3.0.0 or later
  - Symfony: 4.4.0 or later
  - Ruby: 5.5.0 or later
  - Java: 6.5.0 or later
  - .NET: 3.22.0 or later
  - Go: 0.16.0 or later

## Configuration

Next we will discuss on how you can use Dynamic Sampling in your organization.

![The dynamic sampling mode and target sample rate setting.](./img/mode-and-target-sample-rate.png)

### Modes

If you don't want to worry about manually setting sample rates, Sentry can do it for you—just apply a global sample rate for your organization and we’ll automatically balance projects and prioritize things like low-volume endpoints or new releases. For those who need more control, you can set individual sample rates for specific projects, customizing data retention at the project level.

<Note>

Please note that these Dynamic Sampling modes are only available for customers on our latest plans starting June 2024.

</Note>

In most of the cases we recommend automatic mode. It is more convenient as it automatically adjusts projects according to their traffic volume.

### Automatic mode

When set to "automatic" mode, you can configure the target sample rate for your organization. This value will specify how much of the incoming traffic should be stored across all your projects. Underneath, Dynamic Sampling determines how this sample rate is distributed across all projects in your organization. You can see in the project list a preview of the project-specific rates.

Automatic mode boosts the sample rate of lower-volume projects while simoultaneously reducing the sample rate of higher-volume projects. Sample rates are adjusted continuously to account for changes in event volume over time. This process operates in a short sliding window which helps with seasonal traffic patterns like Weekends, holidays, and night times.

Within the sample rates determined for each project, Dynamic Sampling applies additional sampling priorities to further prioritize the most valuable data. You can read more about the sampling priorities in the [Dynamic Sampling Priorities](#dynamic-sampling-priorities) section.

The project preview is based on the last 24 hours or 30 days of traffic, depending on the preview setting. This will show the dynamically allocated rates for the project taking into account the last 24 hours or 30 days of traffic. As the rates of the projects continuously change, choose 24 hours to have a more accurate view on your current sample rates and 30 days to see the averaged sample rates in your billing cycle.

![The dynamic sampling mode and target sample rate setting.](./img/project-sample-rate-preview.png)

Switching back to automatic mode from manual mode will start the recalibration process immediatly and resets the sample rates of each project in the organization to the calculated values. There is no way to restore the manually configured project sample rates after the switch.

### Manual mode

In the "manual" mode, you can configure a fixed sample rate for each project in your organization. This value will specify how much of the incoming traffic should be stored for the respective project. The sample rate for each project can be set between 0% and 100% and it defaults to 100% and are not adjusted by Dynamic Sampling.

When the sample rates of each project is edited, an estimated overall organization sample rate is calculated as a weighted average across all projects. This value is always an estimation and changes according to volume within projects.

If you want to change the sample rates for all projects at once, you an edit the overall organition sample rate. This will in turn adjust the sample rates of all projects to achieve the estimate rate. The maximum value is 100% and other projects will be adjusted accordingly to achieve the estimate rate.

In order to apply the changes, you need to click the "Apply changes" button, otherwise, the changes will not be saved.

As with automatic mode [Dynamic Sampling Priorities](#dynamic-sampling-priorities) apply within the project, which will boost certain spans and deprioritize others.

## Sample Rates for Distributed Traces

It is important to understand how sample rates affect behavior of sampling distributed traces. Sometimes spans originate in one project, but are connected to spans in another project. For example, the sample rate of the frontend project will also affect the sampling of the connected backend application, as the whole span will not propagate.

{/* TODO: replace with custom graphic */}

![Diagram showing the effect of sampling on distriubuted traces.](/develop-docs/application/dynamic-sampling/images/clientAndDynamicSampling.png)


## Differences to Sampling in the Sentry SDKs

Sampling in the SDKs is a way to reduce the number of events sent to Sentry by only sending a percentage of events. Dynamic Sampling, on the other hand, is a way to adjust the sample rate for events that have already been sent to Sentry based on the volume of events that have been received by Sentry.

So using sampling in the SDKs may be necessary for very high volumes of events and may be necessary to reduce instrumentation overheads.

The sample rate used in the SDK can usually only be changed by a rollout of a new version of the application using the SDK, unless a custom mechanism is implemented to change the sample rate dynamically.

With Dynamic Sampling, however, it is possible to configure the sampling rate for each project in your organization dynamically, without requiring any changes to the applications themselves.

Addiontally, with the automatic mode, Dynamic Sampling continuously monitors the traffic for each project and adjusts the sample rate of each project to prioritize the most relevant data.

### When to Use Dynamic Sampling vs. SDK Sampling

The biggest benefit of Dynamic Sampling is that, as the name implies, it's dynamic. This means that the sample rate is adjusted based on the volume of events that have been received by Sentry. This makes it a great choice for organizations that have a mix of high- and low-volume projects, as it allows you to maximize your quota by adjusting the sample rate based on each project’s event volume.

A big advantage of Dynamic Sampling is that it can prioritize certain spans based on the content of the spans as it has more insight than the SDKs. For example, it can prioritize spans from the latest release or from low-volume projects. This can help you get more visibility into the most important parts of your application.

On the other hand, the SDK sample rate is static and set by you in the SDK configuration. This makes it a good choice for organizations that have a consistent event volume and want to ensure that only a certain percentage of events are sent to Sentry. You might want to reduce the numer of spans sent to Sentry to reduce the instrumentation overheads, lower bandwidth usage especially for mobile applications or to reduce the number of accepted spans.

### Deciding on Your SDK Sample Rate

To give Sentry the fullest, most accurate picture of your application’s health, we recommend that you send us 100% of your transactions. You can do this by setting your [tracesSampleRate](/platform-redirect/?next=/performance/) to 1.0. If this isn't feasible for your organization, set a lower value, or switch to sampling selectively by using the [tracesSampler](/platform-redirect/?next=/performance/) to filter your transactions based on contextual data. Note that when calculating throughput, transaction metering is based on received transactions not stored transactions.

<Note>
  Please note that changes to your SDK sampling configuration may affect your
  quota. If you increase your SDK sampling rate, you'll also be increasing the
  volume of transactions you send to Sentry. This may require that you adjust
  your transaction quota.
</Note>

You can use both Dynamic Sampling and SDK Sampling together to further optimize your event volume for your specific use case. For example, you can set a low SDK sample rate to ensure that only a certain percentage of events are sent to Sentry, and then use Dynamic Sampling to adjust the sample rate based on the volume of events that have been received by Sentry.

## Dynamic Sampling Priorities

Below is a list of the strategies Dynamic Sampling employs to prioritize and deprioritize data. They are enabled by default, but can be updated on a per-project basis to better fit your organization's needs. To customize this behavior, go to Project Settings > Performance.

### Prioritized Transactions

Sentry automatically prioritizes and retains the following types of transactions:

#### Latest Release

Latest releases are a dynamic sampling priority because when you create a new release, we assume you'll want to have more visibility during the early adoption phase, which improves your ability to catch new issues as your release is gaining traction.
Because you may want to deploy the same release in different environments, we'll also take your environment into account and prioritize those transactions.

#### Dev Environments

Since dev environments usually generate a small number of transactions as compared to prod environments, we prioritize them during your testing phase so you can get meaningful insights. We consider an environment to be a dev environment if its name matches one of the following glob pattterns:

- `*debug*`
- `*dev*`
- `*local*`
- `*qa*`
- `*test*`

#### Low Volume Projects

<Note>

You won't be able to disable the Low Volume Projects dynamic sampling priority because it's set on an organization-wide level, not on a per-project basis.

</Note>

Some projects within your organization are very high volume compared to others. This means that low-volume projects might get drowned out if we treat all projects equally. To ensure that you have enough samples regardless of project scale, we prioritize low-volume projects.

#### Low Volume Transactions

Transactions can be logically grouped by their name within a project. This means that transactions with the same name most likely indicate the same operation or code path, while transactions with different names usually indicate different operations.
We prioritize low-volume transactions for the same reason we prioritize low-volume projects – so they don't get drowned out by high-volume transactions. We want to make sure that transactions representing low-volume code paths are sampled in enough quantities to generate a complete view of your application.

### Investigation Mode

Our automated dynamic sampling priorities work well in a generic manner to collect a baseline of samples because they prioritize retaining data that is valuable for any customer at any given time. However, there are certain scenarios, such as investigating a particular issue, when very specific data becomes temporarily more important. In such cases, sometimes the automated sampling priorities do not provide enough samples, so you may want to create investigation rules.

Investigation rules are sampling rules that can be created through the Sentry UI to temporarily boost the number of transactions collected for a particular scenario (for example, transactions with specific tag values). These rules can be created to retain more samples when too few (less than 5) are available. Once created, a rule will be active for up to 48 hours or until 100 samples are collected. You'll be notified via email when enough transactions have been collected.

Investigation sampling rules only apply to transactions and don't guarantee that full traces will be sampled. The maximum number of sampling rules that can exist at the same time is 50.

#### Creating a New Investigation Rule

When you perform a query on transactions either in [Discover](/product/explore/discover-queries/) or in [Transaction Summary](/product/performance/transaction-summary/) and receive fewer than 5 samples, you can click "Get Samples" to create a new investigation rule to retain more samples of transactions for the respective query.

![Investigation Mode in Discover](./img/investigation-bias-discover.png)

<Note>

Please note that this feature only applies to transactions. Therefore, in Discover, you have to specify `event.type:transaction` in the query to access the feature, whereas in Performance the event type is implicit.

</Note>

Clicking this button triggers the creation of an investigation rule for the respective query. After the successful creation of the rule, a notification will appear and the button for creating the investigation rule will be replaced by a message specifying that the investigation is in progress and the amount of time since it has been active.

![Rule successfully created](./img/investigation-bias-rule-created.png)

If a user performs the same search later and the investigation is still active, the notification will indicate that there is an active rule collecting data for the query.

Creating a rule is also possible from the Transaction Summary page in Performance.

![Investigation Mode in Transaction Summary](./img/investigation-bias-tx-summary.png)


### Deprioritized Transactions

Sentry automatically deprioritizes the following transactions:

#### Health Checks

We deprioritize health check type transactions because while they're important for checking the stability of your application, they don't have any value beyond the task associated with them. We consider a transaction to be a health check if its name matches one of the following glob patterns:

- `*healthcheck*`
- `*heartbeat*`
- `*/health`
- `*/healthy`
- `*/healthz`
- `*/live`
- `*/livez`
- `*/ready`
- `*/readyz`
- `*/ping`

### How to Change Dynamic Sampling Priorities

To make changes to a project's dynamic sampling priorities in Sentry, go to **Settings > Projects**, select the project you're interested in, then scroll down to "Performance" in the "PROCESSING" section and make any updates under "DYNAMIC SAMPLING PRIORITIES" using the toggles. Each of your projects can have an individual set of dynamic sampling priorities.

<Arcade src="https://demo.arcade.software/bEv0SO2UEmqbVJVok99o?embed" />